# 用户加密
---


#### 名词解释

> 1. **拖库** 本来是数据库领域的专用语，指从数据库中导出数据。而现在它被用来指网站遭到入侵后，黑客窃取数据库的行为。
> 1. **撞库** 使用大量的一个网站的账号密码，去另一个网站尝试登陆。
> 1. **洗库** 黑客入侵网站在取得大量的用户数据之后，通过一系列的技术手段和黑色产业链将有价值的用户数据变现。
> 1. **社工库** 黑客将获取的各种数据库关联起来，对用户进行全方位画像。
> 

黑客入侵A网站后对网站拖库，拿到的数据可以存到自己的社工库里，也可以直接洗库变现。拿到的这部分数据再去B网站尝试登陆，而这就可以称之为是撞库。撞库后的数据可以继续存入社工库，或是洗库变现，以此循环...


#### 如何对用户密码进行加密

- 密码哈希是什么？

> 1. 保护密码的最好办法是使用加盐密码哈希（ salted password hashing）
> 1. 哈希算法是一种单向函数。它把任意数量的数据转换为固定长度的“指纹”，而且这个过程无法逆转。它们有这样的特性：如果输入发生了一点改变，由此产生的哈希值会完全不同。这个特性很适合用来存储密码。
> 1. 像 SHA256 、 SHA512 、 RIPEMD 和 WHIRLPOOL 都是加密哈希函数

- 如何破解哈希？

> 1. 字典攻击：字典攻击使用包含单词、短语、常用密码和其他可能用做密码的字符串的字典文件。对文件中的每个词都进行哈希加密，将这些哈希值和要破解的密码哈希值比较。如果它们相同，这个词就是密码。字典文件是通过大段文本中提取的单词构成，甚至还包括一些数据库中真实的密码。
> 1. 暴力攻击：暴力攻击是对于给定的密码长度，尝试每一种可能的字符组合。这种方式会消耗大量的计算，也是破解哈希加密效率最低的办法，但最终会找出正确的密码。因此密码应该足够长，以至于遍历所有可能的字符组合，耗费的时间太长令人无法承受，从而放弃破解。
> 1. 查表法：主要理念是预先计算（ pre-compute）出密码字典中的每个密码的哈希值，然后把他们相应的密码存储到一个表里。
> 1. 反向查表法：首先，攻击者从被黑的用户帐号数据库创建一个用户名和对应的密码哈希表，然后，攻击者猜测一系列哈希值并使用该查询表来查找使用此密码的用户。通常许多用户都会使用相同的密码，因此这种攻击方式特别有效。
> 1. 彩虹表：彩虹表是一种以空间换时间的技术。与查表法相似，只是它为了使查询表更小，牺牲了破解速度。因为彩虹表更小，所以在单位空间可以存储更多的哈希值，从而使攻击更有效。能够破解任何最多 8 位长度的 MD5 值的彩虹表已经出现。


- 加盐 
> 1. 查表法和彩虹表只有在所有密码都以完全相同的方式进行哈希加密才有效。如果两个用户有相同的密码，他们将有相同的密码哈希值。我们可以通过“随机化”哈希，当同一个密码哈希两次后，得到的哈希值是不一样的，从而避免了这种攻击。
> 1. 错误用法：盐值复用、短盐值
> 1. 哈希碰撞：碰撞攻击是指存在一个和用户密码不同的字符串，却有相同的哈希值。然而，即使是像 MD5 这样的脆弱的哈希函数找到碰撞也需要大量的专门算力（ dedicated computing power），所以在实际中“意外地”出现哈希碰撞的情况不太可能。
